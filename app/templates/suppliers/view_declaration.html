{% import "toolkit/summary-table.html" as summary %}

{% extends "_base_page.html" %}

{% block page_title %}
  View {{ framework.name }} declaration - Digital Marketplace admin
{% endblock %}

{% block breadcrumb %}
  {%
      with items = [
          {
              "link": url_for('.index'),
              "label": "Admin home"
          },
          {
              "link": url_for('.supplier_details', supplier_id=supplier.id),
              "label": supplier.name
          },
          {
              "label": "{} declaration".format(framework.name)
          }
      ]
  %}
    {% include "toolkit/breadcrumb.html" %}
  {% endwith %}
{% endblock %}

{% block main_content %}
  <div class="grid-row">
    <div class="service-title">
      {%
        with
        context = supplier.name,
        heading = framework.name + " declaration",
        smaller = True
      %}
        {% include "toolkit/page-heading.html" %}
      {% endwith %}
    </div>
  </div>

  {% for section in content.summary(declaration) %}
    {{ summary.heading(section.name) }}
    {{ summary.top_link("Edit", url_for('.edit_supplier_declaration_section', supplier_id=supplier.id, framework_slug=framework.slug, section_id=section.id), hidden_text=section.name) }}
    {% call(item) summary.list_table(
      section.questions,
      caption="Declaration",
      empty_message="This supplier not made a declaration",
      field_headings=[
        'Declaration question',
        'Declaration answer'
      ]
    ) %}
      {% call summary.row() %}
        {{ summary.field_name(item.question) }}
        {{ summary[item.type](item.value) }}
      {% endcall %}
    {% endcall %}
  {% endfor %}

{% endblock %}
